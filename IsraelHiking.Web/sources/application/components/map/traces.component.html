<aol-layer-vector *ngIf="visibleTrace && visibleTrace.dataContainer">
    <aol-source-vector>
        <aol-feature>
            <aol-geometry-linestring>
                <aol-collection-coordinates [coordinates]="traceCoordinates" [srid]="'EPSG:4326'"></aol-collection-coordinates>
            </aol-geometry-linestring>
            <aol-style>
                <aol-style-stroke [width]="3" [color]="'blue'"></aol-style-stroke>
            </aol-style>
        </aol-feature>
        <aol-feature [id]="TRACE_CONFIG">
            <aol-geometry-point>
                <aol-coordinate [x]="traceCoordinates[0][0]" [y]="traceCoordinates[0][1]" [srid]="'EPSG:4326'"></aol-coordinate>
            </aol-geometry-point>
            <aol-style>
                <aol-style-circle [radius]="15">
                    <aol-style-fill [color]="'white'"></aol-style-fill>
                    <aol-style-stroke [color]="'black'" [width]="2"></aol-style-stroke>
                </aol-style-circle>
                <aol-style-text [text]="resources.getCharacterForIcon('icon-cogs')" font="normal 20px IsraelHikingMap"></aol-style-text>
            </aol-style>
        </aol-feature>
    </aol-source-vector>
</aol-layer-vector>
<clearable-overlay *ngIf="traceCoordinates.length > 0" 
                   [latlng]="{ lat: traceCoordinates[0][1], lng: traceCoordinates[0][0]}" 
                   [title]="visibleTrace.name"
                   [isOpen]="isConfigOpen"
                   (closed)="isConfigOpen = false"
                   (cleared)="clearTrace()"
                   (convertToRoute)="convertToRoute()"></clearable-overlay>
<div *ngIf="missingParts">
    <aol-layer-vector>
        <aol-source-vector>
            <aol-feature *ngFor="let feature of missingParts.features">
                <aol-geometry-linestring>
                    <aol-collection-coordinates [coordinates]="feature.geometry.coordinates" [srid]="'EPSG:4326'"></aol-collection-coordinates>
                </aol-geometry-linestring>
                <aol-style>
                    <aol-style-stroke [width]="3" [color]="feature === selectedFeature ? 'brown' : 'red'"></aol-style-stroke>
                </aol-style>
            </aol-feature>
            <aol-feature [id]="MISSING_PART + idx" *ngFor="let feature of missingParts.features; let idx = index">
                <aol-geometry-point>
                    <aol-coordinate [x]="feature.geometry.coordinates[0][0]" [y]="feature.geometry.coordinates[0][1]" [srid]="'EPSG:4326'"></aol-coordinate>
                </aol-geometry-point>
            </aol-feature>
        </aol-source-vector>
    </aol-layer-vector>
    <missing-part-overlay [feature]="selectedFeature" [isOpen]="missingCoordinates != null" [latlng]="missingCoordinates" (closed)="clearSelection()" (removed)="removeMissingPart()"></missing-part-overlay>
</div>

